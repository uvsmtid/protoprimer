---
feature_topic: FT_75_87_82_46
topic_title: entry script
topic_status: TODO
---

## Definition

Entry script is a term describing the command a user types into its shell to execute:

```sh
./path/to/script
```

## Clarification

A user may also start any **binary** executable that way, but in the context of `protoprimer`,
the phrase "entry script" narrows down specifically to those commands implemented as **text** scripts
primarily because they often have to be **very primitive** to create.

They serve two purposes:
*   they should be relatively easy for user to type
*   they should not do anything but delegate executing complex logic somewhere else

In short, they are **primitive delegators**.

## Why primitive delegators?

Entry scripts should be kept primitive because they are harder to test:
*   they are outside of `venv` which makes it difficlut to execute reliably
*   they can be shell scripts that lack test-ability (see [FT_44_72_60_67.python_vs_shell.md][FT_44_72_60_67.python_vs_shell.md])

Ideally, they serve as only as an entry point to launch the rest of the code
(which is supposed to be inside `venv` within installed modules).

## How to delegate?

Entry scripts are started by the user shell and their `python` is unpredictable -
see [FT_72_45_12_06.python_executable.md][FT_72_45_12_06.python_executable.md].

The main job for entry scripts is to figure out how to delegate the execution to a module inside `venv`.

Options for `venv` activation:

*   The fastest option is to use (generated) shebang pointing to a `python` binary from `venv`.

    This is a less flexible approach with limits on the maximum length of shebang line - see [FT_02_89_37_65.shebang_line.md][FT_02_89_37_65.shebang_line.md

*   A slower alternative is to run a helper function which does the job.

    This is what the `protoprimer` is designed for - see [FT_90_65_67_62.proto_code.md][FT_90_65_67_62.proto_code.md].

    In fact, there are two helper functions - see [FT_58_74_37_70.starter_vs_bootstrapper.md][FT_58_74_37_70.starter_vs_bootstrapper.md].

## Special case: `proto_code`

It is possible to run `proto_code` as an entry script directly
(see min [FT_59_95_81_63.env_layout.md][FT_59_95_81_63.env_layout.md]), for example:

```sh
./cmd/proto_code/proto_kernel.py -h
```

In that case, the internal logic is **not** primitive (as it executes the core of the `protoprimer`).

However, because it is a copy of `protoprimer.primer_kernel`, it is still test-able inside `venv`.

---

[shebang_wiki]: https://en.wikipedia.org/wiki/Shebang_(Unix)
[FT_44_72_60_67.python_vs_shell.md]: FT_44_72_60_67.python_vs_shell.md
[FT_90_65_67_62.proto_code.md]: FT_90_65_67_62.proto_code.md
[FT_59_95_81_63.env_layout.md]: FT_59_95_81_63.env_layout.md
[FT_72_45_12_06.python_executable.md]: FT_72_45_12_06.python_executable.md
[FT_02_89_37_65.shebang_line.md]: FT_02_89_37_65.shebang_line.md
[FT_58_74_37_70.starter_vs_bootstrapper.md]: FT_58_74_37_70.starter_vs_bootstrapper.md
